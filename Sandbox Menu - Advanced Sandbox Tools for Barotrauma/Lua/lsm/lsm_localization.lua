-- Единый модуль локализации для Sandbox Menu (LSM).
-- Ключи для перевода: default, ru-RU, zh-CN (упрощённый китайский), zh-TW (традиционный китайский).
-- Носители заполняют zh-CN и zh-TW; значения по умолчанию оставлены на английском.

LSM = LSM or {}

local Strings = {
    ["default"] = {
        -- Entity menu
        control_mode = "CONTROL",
        return_body = "RETURN",
        entities = "Entities",
        all_groups = "All Groups",
        all_mods = "All Mods",
        control_mode_hint = "CONTROL MODE: LMB on character to take control. RMB to cancel.",
        spawn_hint = "Selected: %s. LMB in world to spawn. RMB to cancel.",
        spawn_cancelled = "Spawn cancelled",
        control_cancelled = "Control mode cancelled",
        no_character = "No character under cursor",
        taking_control = "Taking control of: %s",
        now_controlling = "Now controlling: %s",
        returning_to = "Returning to: %s",
        returned = "Returned to original body",
        original_not_available = "Original character not available!",
        humanoid_hint = "[Humanoid - can have jobs]",
        multi_spawn_mode = "MULTI SPAWN",
        multi_spawn_enabled = "Multi-spawn mode enabled",
        multi_spawn_disabled = "Multi-spawn mode disabled",
        multi_spawn_hint = "MULTI SPAWN: LMB spawns entity without resetting selection. RMB to cancel.",
        entity_multi_spawn_blocked_by_control = "Cannot enable multi-spawn while in control mode",
        entity_control_blocked_by_multi_spawn = "Cannot enter control mode while multi-spawn is active",
        -- Item menu
        place_mode = "Place Mode",
        place_mode_hint_hold = "PLACE MODE: LMB on container/character to put item, or in world to place. RMB to cancel.",
        place_mode_hint_place = "PLACE MODE: LMB to place %s at cursor. RMB to cancel.",
        place_cancelled = "Place mode cancelled",
        gave_item = "Gave %s%s to %s",
        placed_item = "Placed %s%s at cursor",
        placed_in_container = "Placed %s%s in %s",
        container = "container",
        items = "Items",
        all_items = "All Items",
        all_mods = "All Mods",
        multi_place_mode = "MULTI PLACE",
        multi_place_enabled = "Multi-place mode enabled",
        multi_place_disabled = "Multi-place mode disabled",
        multi_place_hint = "MULTI PLACE: LMB places item without resetting selection. RMB to cancel.",
        multi_place_requires_place_mode = "Enable place mode first",
        item_cat_all = "All Items",
        item_cat_structure = "Structure",
        item_cat_decorative = "Decorative",
        item_cat_machine = "Machine",
        item_cat_medical = "Medical",
        item_cat_weapon = "Weapon",
        item_cat_diving = "Diving",
        item_cat_equipment = "Equipment",
        item_cat_fuel = "Fuel",
        item_cat_electrical = "Electrical",
        item_cat_material = "Material",
        item_cat_alien = "Alien",
        item_cat_wrecked = "Wrecked",
        item_cat_item_assembly = "ItemAssembly",
        item_cat_legacy = "Legacy",
        item_cat_misc = "Misc",
        item_all_mods = "All Mods",
        item_quality_normal = "Normal Quality",
        item_quality_good = "Good Quality",
        item_quality_excellent = "Excellent Quality",
        item_quality_masterwork = "Masterwork Quality",
        -- Affliction menu
        affliction_not_selected = "Not selected",
        affliction_whole_body = "Whole Body",
        affliction_head = "Head",
        affliction_torso = "Torso",
        affliction_left_arm = "Left Arm",
        affliction_right_arm = "Right Arm",
        affliction_left_leg = "Left Leg",
        affliction_right_leg = "Right Leg",
        affliction_tooltip_id = "\nID: ",
        affliction_tooltip_type_buff = "\nType: Buff",
        affliction_tooltip_type_affliction = "\nType: Affliction",
        affliction_tooltip_duration = "\nDuration: %.1f seconds",
        affliction_tooltip_description = "\n\nDescription:\n",
        affliction_tooltip_location = "\nLocation: ",
        affliction_tooltip_location_whole = "\nLocation: Whole Body",
        affliction_tooltip_removes_in = "\nRemoves in: %.1f seconds",
        affliction_tooltip_removes_unknown = "\nRemoves in: Unknown",
        affliction_tooltip_desc_label = "\ndesc:\n",
        affliction_tab_button = "Afflictions",
        affliction_list_separator = "---",
    },
    ["ru-RU"] = {
        all_groups = "Все группы",
        all_mods = "Все моды",
        spawn_hint = "Выбрано: %s. ЛКМ в мире для спавна. ПКМ - отмена.",
        spawn_cancelled = "Спавн отменён",
        control_cancelled = "Режим управления отменён",
        no_character = "Нет существа под курсором",
        taking_control = "Берём управление: %s",
        now_controlling = "Управляем: %s",
        returning_to = "Возвращаемся к: %s",
        returned = "Вернулись в своё тело",
        original_not_available = "Оригинальный персонаж недоступен!",
        humanoid_hint = "[Гуманоид - может иметь работу]",
        multi_spawn_enabled = "Режим многократного спавна включён",
        multi_spawn_disabled = "Режим многократного спавна отключён",
        entity_multi_spawn_blocked_by_control = "Нельзя включить многократный спавн во время режима управления",
        entity_control_blocked_by_multi_spawn = "Нельзя войти в режим управления при активном многократном спавне",
        -- TODO: На русском звучит криво, потом придумаю как назвать.
        -- place_mode = "Режим размещения",
        -- place_mode_hint_hold = "РАЗМЕЩЕНИЕ: ЛКМ на контейнер/персонажа чтобы положить предмет, или в мире чтобы разместить. ПКМ - отмена.",
        -- place_mode_hint_place = "РАЗМЕЩЕНИЕ: ЛКМ чтобы разместить %s на курсоре. ПКМ - отмена.",
        -- multi_spawn_hint = "МНОГОКРАТНЫЙ СПАВН: ЛКМ спавнит сущность без сброса выбора. ПКМ - отмена.",
        -- multi_spawn_mode = "МНОГОКРАТНЫЙ СПАВН",
        -- control_mode_hint = "РЕЖИМ УПРАВЛЕНИЯ: ЛКМ по существу чтобы взять контроль. ПКМ - отмена.",
        -- control_mode = "УПРАВЛЕНИЕ",
        -- return_body = "ВЕРНУТЬСЯ",
        -- entities = "Существа",
        -- items = "Предметы",
        -- affliction_tab_button = "Аффликции",  -- TODO: На русском звучит криво, потом придумаю как назвать.
        place_cancelled = "Размещение отменено",
        gave_item = "Передано %s%s для %s",
        placed_item = "Размещено %s%s на курсоре",
        placed_in_container = "Помещено %s%s в %s",
        container = "контейнер",
        all_items = "Все предметы",
        all_mods = "Все моды",
        multi_place_mode = "МНОГОКРАТНОЕ РАЗМЕЩЕНИЕ",
        multi_place_enabled = "Многократное размещение включено",
        multi_place_disabled = "Многократное размещение отключено",
        multi_place_hint = "МНОГОКРАТНОЕ РАЗМЕЩЕНИЕ: ЛКМ размещает предмет без сброса выбора. ПКМ - отмена.",
        multi_place_requires_place_mode = "Сначала включите режим размещения",
        item_cat_all = "Все предметы",
        item_cat_structure = "Structure",
        item_cat_decorative = "Decorative",
        item_cat_machine = "Machine",
        item_cat_medical = "Medical",
        item_cat_weapon = "Weapon",
        item_cat_diving = "Diving",
        item_cat_equipment = "Equipment",
        item_cat_fuel = "Fuel",
        item_cat_electrical = "Electrical",
        item_cat_material = "Material",
        item_cat_alien = "Alien",
        item_cat_wrecked = "Wrecked",
        item_cat_item_assembly = "ItemAssembly",
        item_cat_legacy = "Legacy",
        item_cat_misc = "Misc",
        item_all_mods = "Все моды",
        item_quality_normal = "Normal Quality",
        item_quality_good = "Good Quality",
        item_quality_excellent = "Excellent Quality",
        item_quality_masterwork = "Masterwork Quality",
        affliction_not_selected = "Не выбрано",
        affliction_whole_body = "Всё тело",
        affliction_head = "Голова",
        affliction_torso = "Торс",
        affliction_left_arm = "Левая рука",
        affliction_right_arm = "Правая рука",
        affliction_left_leg = "Левая нога",
        affliction_right_leg = "Правая нога",
        affliction_tooltip_id = "\nID: ",
        affliction_tooltip_type_buff = "\nТип: бафф",
        affliction_tooltip_type_affliction = "\nТип: аффликия",
        affliction_tooltip_duration = "\nДлительность: %.1f сек",
        affliction_tooltip_description = "\n\nОписание:\n",
        affliction_tooltip_location = "\nЧасть тела: ",
        affliction_tooltip_location_whole = "\nЧасть тела: всё тело",
        affliction_tooltip_removes_in = "\nСпад через: %.1f сек",
        affliction_tooltip_removes_unknown = "\nСпад: неизвестно",
        affliction_tooltip_desc_label = "\nописание:\n",
        affliction_list_separator = "---",
    },
    ["zh-CN"] = {
        control_mode = "控制",
        return_body = "返回",
        entities = "实体",
        all_groups = "所有分类",
        all_mods = "所有模组",
        control_mode_hint = "控制模式：鼠标左键点击角色进行控制，点击鼠标右键取消。",
        spawn_hint = "已选中: %s. 在世界地图上点击鼠标左键生成，点击鼠标右键取消。",
        spawn_cancelled = "取消生成",
        control_cancelled = "取消控制模式",
        no_character = "光标下没有角色",
        taking_control = "接管控制: %s",
        now_controlling = "正在控制: %s",
        returning_to = "返回控制: %s",
        returned = "回到原角色",
        original_not_available = "原角色不可用！",
        humanoid_hint = "[Humanoid - can have jobs]",
        multi_spawn_mode = "多重生成",
        multi_spawn_enabled = "已启用多重生成模式",
        multi_spawn_disabled = "多重生成模式已禁用",
        multi_spawn_hint = "多重生成：点击鼠标左键生成实体，无需重置选择.点击鼠标右键取消。",
        entity_multi_spawn_blocked_by_control = "控制模式下无法启用多重生成",
        entity_control_blocked_by_multi_spawn = "多重生成启用时无法进入控制模式",
        place_mode = "放置模式",
        place_mode_hint_hold = "放置模式：点击容器/角色鼠标左键放置物品，或在游戏世界中放置物品。点击鼠标右键取消。",
        place_mode_hint_place = "放置模式：点击鼠标左键将 %s 放置在光标处。点击鼠标右键取消。",
        place_cancelled = "放置模式已取消",
        gave_item = "给 %s%s 予 %s",
        placed_item = "已将 %s%s 放置在光标处",
        placed_in_container = "已将 %s%s 放入 %s",
        container = "容器",
        items = "物品",
        all_items = "所有物品",
        all_mods = "所有模组",
        multi_place_mode = "多重放置",
        multi_place_enabled = "已启用多重放置模式",
        multi_place_disabled = "多重放置模式已禁用",
        multi_place_hint = "多重放置: 鼠标左键放置物品，不会重置选择。鼠标右键取消。",
        multi_place_requires_place_mode = "首先启用放置模式",
        item_cat_all = "所有物品",
        item_cat_structure = "结构",
        item_cat_decorative = "装饰",
        item_cat_machine = "机械",
        item_cat_medical = "医疗",
        item_cat_weapon = "武器",
        item_cat_diving = "潜水",
        item_cat_equipment = "装备",
        item_cat_fuel = "燃料",
        item_cat_electrical = "电气",
        item_cat_material = "材料",
        item_cat_alien = "异星",
        item_cat_wrecked = "已破坏",
        item_cat_item_assembly = "制造",
        item_cat_legacy = "旧版",
        item_cat_misc = "杂物",
        item_all_mods = "所有模组",
        item_quality_normal = "一般品质",
        item_quality_good = "良好品质",
        item_quality_excellent = "精致品质",
        item_quality_masterwork = "大师品质",
        affliction_not_selected = "未选择",
        affliction_whole_body = "全身",
        affliction_head = "头",
        affliction_torso = "躯干",
        affliction_left_arm = "左臂",
        affliction_right_arm = "右臂",
        affliction_left_leg = "左腿",
        affliction_right_leg = "右腿",
        affliction_tooltip_id = "\nID: ",
        affliction_tooltip_type_buff = "\n类型: 状态效果",
        affliction_tooltip_type_affliction = "\nType: 伤害",
        affliction_tooltip_duration = "\n持续时间: %.1f 秒",
        affliction_tooltip_description = "\n\n描述:\n",
        affliction_tooltip_location = "\n位置: ",
        affliction_tooltip_location_whole = "\n位置: 全身",
        affliction_tooltip_removes_in = "\n剩余时间: %.1f 秒",
        affliction_tooltip_removes_unknown = "\n移除: Unknown",
        affliction_tooltip_desc_label = "\n描述:\n",
        affliction_tab_button = "状态效果",
        affliction_list_separator = "---",
    },
    ["zh-TW"] = {
        control_mode = "控制",
        return_body = "返回",
        entities = "實體",
        all_groups = "所有分類",
        all_mods = "所有模組",
        control_mode_hint = "控制模式：鼠標左鍵點擊角色進行控制，點擊鼠標右鍵取消。",
        spawn_hint = "已選中: %s. 在世界地圖上點擊鼠標左鍵生成，點擊鼠標右鍵取消。",
        spawn_cancelled = "取消生成",
        control_cancelled = "取消控制模式",
        no_character = "光標下沒有角色",
        taking_control = "接管控制: %s",
        now_controlling = "正在控制: %s",
        returning_to = "返回控制: %s",
        returned = "回到原角色",
        original_not_available = "原角色不可用！",
        humanoid_hint = "[Humanoid - can have jobs]",
        multi_spawn_mode = "多重生成",
        multi_spawn_enabled = "已啓用多重生成模式",
        multi_spawn_disabled = "多重生成模式已禁用",
        multi_spawn_hint = "多重生成：點擊鼠標左鍵生成實體，無需重置選擇.點擊鼠標右鍵取消。",
        entity_multi_spawn_blocked_by_control = "控制模式下無法啓用多重生成",
        entity_control_blocked_by_multi_spawn = "多重生成啓用時無法進入控制模式",
        place_mode = "放置模式",
        place_mode_hint_hold = "放置模式：點擊容器/角色鼠標左鍵放置物品，或在遊戲世界中放置物品。點擊鼠標右鍵取消。",
        place_mode_hint_place = "放置模式：點擊鼠標左鍵將 %s 放置在光標處。點擊鼠標右鍵取消。",
        place_cancelled = "放置模式已取消",
        gave_item = "給 %s%s 予 %s",
        placed_item = "已將 %s%s 放置在光標處",
        placed_in_container = "已將 %s%s 放入 %s",
        container = "容器",
        items = "物品",
        all_items = "所有物品",
        all_mods = "所有模組",
        multi_place_mode = "多重放置",
        multi_place_enabled = "已啓用多重放置模式",
        multi_place_disabled = "多重放置模式已禁用",
        multi_place_hint = "多重放置: 鼠標左鍵放置物品，不會重置選擇。鼠標右鍵取消。",
        multi_place_requires_place_mode = "首先啓用放置模式",
        item_cat_all = "所有物品",
        item_cat_structure = "結構",
        item_cat_decorative = "裝飾",
        item_cat_machine = "機械",
        item_cat_medical = "醫療",
        item_cat_weapon = "武器",
        item_cat_diving = "潛水",
        item_cat_equipment = "裝備",
        item_cat_fuel = "燃料",
        item_cat_electrical = "電氣",
        item_cat_material = "材料",
        item_cat_alien = "異星",
        item_cat_wrecked = "已破壞",
        item_cat_item_assembly = "製造",
        item_cat_legacy = "舊版",
        item_cat_misc = "雜物",
        item_all_mods = "所有模組",
        item_quality_normal = "一般品質",
        item_quality_good = "良好品質",
        item_quality_excellent = "精緻品質",
        item_quality_masterwork = "大師品質",
        affliction_not_selected = "未选择",
        affliction_whole_body = "全身",
        affliction_head = "頭",
        affliction_torso = "軀幹",
        affliction_left_arm = "左臂",
        affliction_right_arm = "右臂",
        affliction_left_leg = "左腿",
        affliction_right_leg = "右腿",
        affliction_tooltip_id = "\nID: ",
        affliction_tooltip_type_buff = "\n類型: 狀態效果",
        affliction_tooltip_type_affliction = "\n類型: 傷害",
        affliction_tooltip_duration = "\n持續時間: %.1f 秒",
        affliction_tooltip_description = "\n\n描述:\n",
        affliction_tooltip_location = "\n位置: ",
        affliction_tooltip_location_whole = "\n位置: 全身",
        affliction_tooltip_removes_in = "\n剩餘時間: %.1f 秒",
        affliction_tooltip_removes_unknown = "\n持續時間: Unknown",
        affliction_tooltip_desc_label = "\n描述:\n",
        affliction_tab_button = "狀態效果",
        affliction_list_separator = "---",
    },
}

-- Игра может отдавать "Russian" или "ru-RU"; маппинг на наши ключи
local function getLanguageKey()
    local lang = "default"
    pcall(function()
        if GameSettings.CurrentConfig and GameSettings.CurrentConfig.Language then
            lang = tostring(GameSettings.CurrentConfig.Language)
        end
    end)
    if lang == "Russian" then lang = "ru-RU" end
    if lang == "ChineseSimplified" or lang == "Simplified Chinese" then lang = "zh-CN" end
    if lang == "ChineseTraditional" or lang == "Traditional Chinese" then lang = "zh-TW" end
    return lang
end

function LSM.ML(key)
    local lang = getLanguageKey()
    local t = Strings[lang] or Strings["default"]
    return t[key] or Strings["default"][key] or key
end

LSM.ItemCategoryKeys = {
    [-1] = "item_cat_all",
    [1] = "item_cat_structure",
    [2] = "item_cat_decorative",
    [3] = "item_cat_machine",
    [4] = "item_cat_medical",
    [5] = "item_cat_weapon",
    [6] = "item_cat_diving",
    [7] = "item_cat_equipment",
    [8] = "item_cat_fuel",
    [9] = "item_cat_electrical",
    [10] = "item_cat_material",
    [11] = "item_cat_alien",
    [12] = "item_cat_wrecked",
    [13] = "item_cat_item_assembly",
    [14] = "item_cat_legacy",
    [15] = "item_cat_misc",
}
LSM.ItemCategoryOrder = { -1, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15 }
